/*
 * test.java
 *
 * Created on March 9, 2007, 8:31 AM
 */

package kopkar.ar.component;

import java.awt.event.KeyEvent;
import java.util.HashMap;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.table.DefaultTableModel;
import jdbc.DbBean;
import kopkar.ar.objectclasses.ar_customerext;
import kopkar.ar.objectclasses.ar_pos_returnext;
import kopkar.ar.objectclasses.ar_pos_salesext;
import kopkar.utils.browsecontroller;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperPrintManager;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.view.JasperViewer;
import utils.CodeException;
import utils.GlobalUtils;
import utils.appsettinghandler;


/**
 *
 * @author  ISParthama
 */
public class frmar_pos_sales_payment extends javax.swing.JDialog {
    
    DbBean db=appsettinghandler.db;
    private DefaultTableModel model;
    private ar_pos_salesext obj;
    private JasperReport jasperReport;
    private JasperPrint jasperPrint;
    private HashMap parameter;
    private Frmar_pos_sales ofrm=null;
    
    public frmar_pos_sales_payment(ar_pos_salesext obj) {
        initComponents();
        this.obj=obj;
        int i=0;
        showdata();
        this.setLocationRelativeTo(null);
    }

    frmar_pos_sales_payment(ar_pos_salesext obj, Frmar_pos_sales ofrm) {
        initComponents();
        this.obj=obj;
        this.ofrm=ofrm;
        int i=0;
        showdata();
        this.setLocationRelativeTo(null);

        filljcmbjumlah_tempo_angsuran();
        jcmbgetmodel_struk.setSelectedIndex(GlobalUtils.toInt(obj.getmodel_struk())-1);
    }

    private void filljcmbjumlah_tempo_angsuran(){
        jcmbjumlah_tempo_angsuran.removeAllItems();
        for (int i=0;i<12;i++){
            jcmbjumlah_tempo_angsuran.addItem(i+1+" Kali");
        }
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jHeader = new javax.swing.JLabel();
        jtxtjumlah_item = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        jtxttotal_bfr_discount = new javax.swing.JTextField();
        jchkinclude_tax = new javax.swing.JCheckBox();
        jtxttax_percent = new javax.swing.JTextField();
        jtxttotal_discount = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jtxtpayment_voucher = new javax.swing.JTextField();
        jtxtvoucher_name = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        jtxtpayment_credit_card = new javax.swing.JTextField();
        jtxtcredit_card_name = new javax.swing.JTextField();
        jHeader1 = new javax.swing.JLabel();
        jHeader2 = new javax.swing.JLabel();
        jHeader3 = new javax.swing.JLabel();
        jtxtcredit_card_number = new javax.swing.JTextField();
        jlbljumlah_tempo_angsuran = new javax.swing.JLabel();
        jtxtpayment_debit_card = new javax.swing.JTextField();
        jtxtdebit_card_name = new javax.swing.JTextField();
        jtxtdebit_card_number = new javax.swing.JTextField();
        optpayment_salary_potong_gaji = new javax.swing.JRadioButton();
        optpayment_salary_status_tunai = new javax.swing.JRadioButton();
        jtxttotal_aft_tax3 = new javax.swing.JTextField();
        jLabel7 = new javax.swing.JLabel();
        jtxtpayment_salary = new javax.swing.JTextField();
        jtxttotal_aft_tax5 = new javax.swing.JTextField();
        jtxtpayment_receipt = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jPanel1 = new javax.swing.JPanel();
        jlblmember_number = new javax.swing.JLabel();
        jlblcustomer_code = new javax.swing.JLabel();
        jlblcustomer_name = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jtxtreffno_pos_return = new javax.swing.JTextField();
        jtxtpayment_pos_return = new javax.swing.JTextField();
        jbtnBrowse17 = new javax.swing.JButton();
        jcmbjumlah_tempo_angsuran = new javax.swing.JComboBox();
        jLabel11 = new javax.swing.JLabel();
        jlbljumlah_tempo_angsuran1 = new javax.swing.JLabel();
        jcmbgetmodel_struk = new javax.swing.JComboBox();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setMinimumSize(new java.awt.Dimension(700, 500));
        getContentPane().setLayout(null);

        jButton1.setFont(new java.awt.Font("Dialog", 1, 10));
        jButton1.setText("Cetak Faktur (F12)");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jButton1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jButton1KeyPressed(evt);
            }
        });
        getContentPane().add(jButton1);
        jButton1.setBounds(10, 430, 140, 25);

        jButton2.setFont(new java.awt.Font("Dialog", 1, 10));
        jButton2.setText("Keluar");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });
        jButton2.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jButton2KeyPressed(evt);
            }
        });
        getContentPane().add(jButton2);
        jButton2.setBounds(160, 430, 90, 25);

        jLabel1.setFont(new java.awt.Font("Dialog", 1, 10));
        jLabel1.setText("Jumlah Item");
        getContentPane().add(jLabel1);
        jLabel1.setBounds(50, 60, 67, 13);

        jHeader.setBackground(new java.awt.Color(102, 102, 102));
        jHeader.setFont(new java.awt.Font("Dialog", 1, 10));
        jHeader.setForeground(new java.awt.Color(255, 255, 255));
        jHeader.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jHeader.setText("Nama Kartu");
        jHeader.setAlignmentY(0.0F);
        jHeader.setOpaque(true);
        getContentPane().add(jHeader);
        jHeader.setBounds(360, 230, 150, 20);

        jtxtjumlah_item.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtjumlah_item.setFocusable(false);
        getContentPane().add(jtxtjumlah_item);
        jtxtjumlah_item.setBounds(210, 60, 150, 23);

        jLabel2.setFont(new java.awt.Font("Dialog", 1, 10));
        jLabel2.setText("Potongan");
        getContentPane().add(jLabel2);
        jLabel2.setBounds(50, 100, 54, 13);

        jtxttotal_bfr_discount.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxttotal_bfr_discount.setText("customer_code");
        jtxttotal_bfr_discount.setFocusable(false);
        jtxttotal_bfr_discount.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxttotal_bfr_discountFocusGained(evt);
            }
        });
        jtxttotal_bfr_discount.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxttotal_bfr_discountKeyPressed(evt);
            }
        });
        getContentPane().add(jtxttotal_bfr_discount);
        jtxttotal_bfr_discount.setBounds(210, 80, 150, 23);

        jchkinclude_tax.setFont(new java.awt.Font("Dialog", 0, 10));
        jchkinclude_tax.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                jchkinclude_taxItemStateChanged(evt);
            }
        });
        jchkinclude_tax.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jchkinclude_taxKeyPressed(evt);
            }
        });
        getContentPane().add(jchkinclude_tax);
        jchkinclude_tax.setBounds(150, 100, 20, 24);

        jtxttax_percent.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxttax_percent.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        jtxttax_percent.setText("tax_percent");
        jtxttax_percent.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxttax_percentFocusGained(evt);
            }
        });
        jtxttax_percent.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                jtxttax_percentPropertyChange(evt);
            }
        });
        jtxttax_percent.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxttax_percentKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxttax_percentKeyReleased(evt);
            }
        });
        getContentPane().add(jtxttax_percent);
        jtxttax_percent.setBounds(170, 100, 40, 23);

        jtxttotal_discount.setEditable(false);
        jtxttotal_discount.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxttotal_discount.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        jtxttotal_discount.setText("tax_amount");
        jtxttotal_discount.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxttotal_discountFocusGained(evt);
            }
        });
        jtxttotal_discount.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxttotal_discountKeyPressed(evt);
            }
        });
        getContentPane().add(jtxttotal_discount);
        jtxttotal_discount.setBounds(210, 100, 150, 23);

        jLabel3.setFont(new java.awt.Font("Dialog", 1, 10));
        jLabel3.setText("Sub TOtal");
        getContentPane().add(jLabel3);
        jLabel3.setBounds(50, 80, 54, 13);

        jLabel4.setFont(new java.awt.Font("Dialog", 1, 10));
        jLabel4.setText("Voucher");
        getContentPane().add(jLabel4);
        jLabel4.setBounds(50, 120, 48, 13);

        jtxtpayment_voucher.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtpayment_voucher.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        jtxtpayment_voucher.setText("customer_code");
        jtxtpayment_voucher.setNextFocusableComponent(jtxttotal_aft_tax5);
        jtxtpayment_voucher.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtpayment_voucherFocusGained(evt);
            }
        });
        jtxtpayment_voucher.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtpayment_voucherKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxtpayment_voucherKeyReleased(evt);
            }
        });
        getContentPane().add(jtxtpayment_voucher);
        jtxtpayment_voucher.setBounds(210, 120, 150, 23);

        jtxtvoucher_name.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtvoucher_name.setText("customer_code");
        jtxtvoucher_name.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtvoucher_nameFocusGained(evt);
            }
        });
        jtxtvoucher_name.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtvoucher_nameKeyPressed(evt);
            }
        });
        getContentPane().add(jtxtvoucher_name);
        jtxtvoucher_name.setBounds(360, 120, 150, 23);

        jLabel5.setFont(new java.awt.Font("Dialog", 1, 10));
        jLabel5.setText("Credit Card");
        getContentPane().add(jLabel5);
        jLabel5.setBounds(50, 250, 150, 13);

        jtxtpayment_credit_card.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtpayment_credit_card.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        jtxtpayment_credit_card.setText("jtxtnilai");
        jtxtpayment_credit_card.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtpayment_credit_cardFocusGained(evt);
            }
        });
        jtxtpayment_credit_card.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtpayment_credit_cardKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxtpayment_credit_cardKeyReleased(evt);
            }
        });
        getContentPane().add(jtxtpayment_credit_card);
        jtxtpayment_credit_card.setBounds(210, 250, 150, 23);

        jtxtcredit_card_name.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtcredit_card_name.setText("jtxtnama_kartu");
        jtxtcredit_card_name.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtcredit_card_nameFocusGained(evt);
            }
        });
        jtxtcredit_card_name.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtcredit_card_nameKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxtcredit_card_nameKeyReleased(evt);
            }
        });
        getContentPane().add(jtxtcredit_card_name);
        jtxtcredit_card_name.setBounds(360, 250, 150, 23);

        jHeader1.setBackground(new java.awt.Color(102, 102, 102));
        jHeader1.setFont(new java.awt.Font("Dialog", 1, 10));
        jHeader1.setForeground(new java.awt.Color(255, 255, 255));
        jHeader1.setText(" :: Bayar Faktur Point of Sales");
        jHeader1.setAlignmentY(0.0F);
        jHeader1.setOpaque(true);
        getContentPane().add(jHeader1);
        jHeader1.setBounds(10, 20, 200, 20);

        jHeader2.setBackground(new java.awt.Color(102, 102, 102));
        jHeader2.setFont(new java.awt.Font("Dialog", 1, 10));
        jHeader2.setForeground(new java.awt.Color(255, 255, 255));
        jHeader2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jHeader2.setText("Nilai");
        jHeader2.setAlignmentY(0.0F);
        jHeader2.setOpaque(true);
        getContentPane().add(jHeader2);
        jHeader2.setBounds(210, 230, 150, 20);

        jHeader3.setBackground(new java.awt.Color(102, 102, 102));
        jHeader3.setFont(new java.awt.Font("Dialog", 1, 10));
        jHeader3.setForeground(new java.awt.Color(255, 255, 255));
        jHeader3.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jHeader3.setText("No. Kartu");
        jHeader3.setAlignmentY(0.0F);
        jHeader3.setOpaque(true);
        getContentPane().add(jHeader3);
        jHeader3.setBounds(510, 230, 150, 20);

        jtxtcredit_card_number.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtcredit_card_number.setText("jtxtno_kartu");
        jtxtcredit_card_number.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtcredit_card_numberFocusGained(evt);
            }
        });
        jtxtcredit_card_number.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtcredit_card_numberKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxtcredit_card_numberKeyReleased(evt);
            }
        });
        getContentPane().add(jtxtcredit_card_number);
        jtxtcredit_card_number.setBounds(510, 250, 150, 23);

        jlbljumlah_tempo_angsuran.setFont(new java.awt.Font("Dialog", 1, 10));
        jlbljumlah_tempo_angsuran.setText("Tempo Pembayaran");
        getContentPane().add(jlbljumlah_tempo_angsuran);
        jlbljumlah_tempo_angsuran.setBounds(290, 440, 240, 13);

        jtxtpayment_debit_card.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtpayment_debit_card.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        jtxtpayment_debit_card.setText("jtxtnilai");
        jtxtpayment_debit_card.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtpayment_debit_cardFocusGained(evt);
            }
        });
        jtxtpayment_debit_card.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtpayment_debit_cardKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxtpayment_debit_cardKeyReleased(evt);
            }
        });
        getContentPane().add(jtxtpayment_debit_card);
        jtxtpayment_debit_card.setBounds(210, 270, 150, 23);

        jtxtdebit_card_name.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtdebit_card_name.setText("jtxtnama_kartu");
        jtxtdebit_card_name.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtdebit_card_nameFocusGained(evt);
            }
        });
        jtxtdebit_card_name.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtdebit_card_nameKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxtdebit_card_nameKeyReleased(evt);
            }
        });
        getContentPane().add(jtxtdebit_card_name);
        jtxtdebit_card_name.setBounds(360, 270, 150, 23);

        jtxtdebit_card_number.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtdebit_card_number.setText("jtxtno_kartu");
        jtxtdebit_card_number.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtdebit_card_numberFocusGained(evt);
            }
        });
        jtxtdebit_card_number.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtdebit_card_numberKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxtdebit_card_numberKeyReleased(evt);
            }
        });
        getContentPane().add(jtxtdebit_card_number);
        jtxtdebit_card_number.setBounds(510, 270, 150, 23);

        buttonGroup1.add(optpayment_salary_potong_gaji);
        optpayment_salary_potong_gaji.setFont(new java.awt.Font("Dialog", 1, 10));
        optpayment_salary_potong_gaji.setText("Potong Gaji");
        optpayment_salary_potong_gaji.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                optpayment_salary_potong_gajiItemStateChanged(evt);
            }
        });
        optpayment_salary_potong_gaji.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                optpayment_salary_potong_gajiActionPerformed(evt);
            }
        });
        optpayment_salary_potong_gaji.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                optpayment_salary_potong_gajiPropertyChange(evt);
            }
        });
        optpayment_salary_potong_gaji.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                optpayment_salary_potong_gajiKeyPressed(evt);
            }
        });
        getContentPane().add(optpayment_salary_potong_gaji);
        optpayment_salary_potong_gaji.setBounds(140, 300, 130, 24);

        buttonGroup1.add(optpayment_salary_status_tunai);
        optpayment_salary_status_tunai.setFont(new java.awt.Font("Dialog", 1, 10));
        optpayment_salary_status_tunai.setSelected(true);
        optpayment_salary_status_tunai.setText("Tunai");
        optpayment_salary_status_tunai.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                optpayment_salary_status_tunaiItemStateChanged(evt);
            }
        });
        optpayment_salary_status_tunai.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                optpayment_salary_status_tunaiActionPerformed(evt);
            }
        });
        optpayment_salary_status_tunai.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                optpayment_salary_status_tunaiPropertyChange(evt);
            }
        });
        optpayment_salary_status_tunai.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                optpayment_salary_status_tunaiKeyPressed(evt);
            }
        });
        getContentPane().add(optpayment_salary_status_tunai);
        optpayment_salary_status_tunai.setBounds(50, 300, 80, 24);

        jtxttotal_aft_tax3.setEditable(false);
        jtxttotal_aft_tax3.setFont(new java.awt.Font("Dialog", 1, 24));
        jtxttotal_aft_tax3.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        jtxttotal_aft_tax3.setText("total_aft_tax");
        jtxttotal_aft_tax3.setFocusable(false);
        jtxttotal_aft_tax3.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxttotal_aft_tax3FocusGained(evt);
            }
        });
        jtxttotal_aft_tax3.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxttotal_aft_tax3KeyPressed(evt);
            }
        });
        getContentPane().add(jtxttotal_aft_tax3);
        jtxttotal_aft_tax3.setBounds(290, 380, 370, 40);

        jLabel7.setFont(new java.awt.Font("Dialog", 1, 10));
        jLabel7.setText("Debet Card");
        getContentPane().add(jLabel7);
        jLabel7.setBounds(50, 270, 150, 13);

        jtxtpayment_salary.setEditable(false);
        jtxtpayment_salary.setFont(new java.awt.Font("Dialog", 1, 24));
        jtxtpayment_salary.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        jtxtpayment_salary.setText("total_aft_tax");
        jtxtpayment_salary.setFocusable(false);
        jtxtpayment_salary.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtpayment_salaryFocusGained(evt);
            }
        });
        jtxtpayment_salary.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtpayment_salaryKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxtpayment_salaryKeyReleased(evt);
            }
        });
        getContentPane().add(jtxtpayment_salary);
        jtxtpayment_salary.setBounds(290, 300, 370, 40);

        jtxttotal_aft_tax5.setEditable(false);
        jtxttotal_aft_tax5.setFont(new java.awt.Font("Dialog", 1, 24));
        jtxttotal_aft_tax5.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        jtxttotal_aft_tax5.setText("total_aft_tax");
        jtxttotal_aft_tax5.setFocusable(false);
        jtxttotal_aft_tax5.setNextFocusableComponent(jtxtpayment_credit_card);
        jtxttotal_aft_tax5.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxttotal_aft_tax5FocusGained(evt);
            }
        });
        jtxttotal_aft_tax5.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxttotal_aft_tax5KeyPressed(evt);
            }
        });
        getContentPane().add(jtxttotal_aft_tax5);
        jtxttotal_aft_tax5.setBounds(290, 190, 370, 40);

        jtxtpayment_receipt.setFont(new java.awt.Font("Dialog", 1, 24));
        jtxtpayment_receipt.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        jtxtpayment_receipt.setText("total_aft_tax");
        jtxtpayment_receipt.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtpayment_receiptFocusGained(evt);
            }
        });
        jtxtpayment_receipt.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtpayment_receiptKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxtpayment_receiptKeyReleased(evt);
            }
        });
        getContentPane().add(jtxtpayment_receipt);
        jtxtpayment_receipt.setBounds(290, 340, 370, 40);

        jLabel8.setFont(new java.awt.Font("Dialog", 1, 24));
        jLabel8.setText("Nilai Faktur");
        getContentPane().add(jLabel8);
        jLabel8.setBounds(50, 190, 240, 30);

        jLabel9.setFont(new java.awt.Font("Dialog", 1, 10));
        jLabel9.setText("Bayar");
        getContentPane().add(jLabel9);
        jLabel9.setBounds(50, 350, 240, 13);

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Customer Information", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Dialog", 1, 10))); // NOI18N
        jPanel1.setFont(new java.awt.Font("Dialog", 1, 10));
        jPanel1.setLayout(null);

        jlblmember_number.setFont(new java.awt.Font("Dialog", 1, 12));
        jlblmember_number.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jlblmember_number.setText("NomorAnggota");
        jlblmember_number.setBorder(javax.swing.BorderFactory.createTitledBorder(""));
        jPanel1.add(jlblmember_number);
        jlblmember_number.setBounds(10, 60, 270, 20);

        jlblcustomer_code.setFont(new java.awt.Font("Dialog", 1, 12));
        jlblcustomer_code.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jlblcustomer_code.setText("KodeCustomer");
        jlblcustomer_code.setBorder(javax.swing.BorderFactory.createTitledBorder(""));
        jPanel1.add(jlblcustomer_code);
        jlblcustomer_code.setBounds(10, 20, 270, 20);

        jlblcustomer_name.setFont(new java.awt.Font("Dialog", 1, 12));
        jlblcustomer_name.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jlblcustomer_name.setText("NamaCustomer");
        jlblcustomer_name.setBorder(javax.swing.BorderFactory.createTitledBorder(""));
        jPanel1.add(jlblcustomer_name);
        jlblcustomer_name.setBounds(10, 40, 270, 20);

        getContentPane().add(jPanel1);
        jPanel1.setBounds(370, 20, 290, 100);

        jLabel10.setFont(new java.awt.Font("Dialog", 1, 10));
        jLabel10.setText("Sales Return");
        getContentPane().add(jLabel10);
        jLabel10.setBounds(50, 140, 150, 13);

        jtxtreffno_pos_return.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtreffno_pos_return.setHorizontalAlignment(javax.swing.JTextField.LEFT);
        jtxtreffno_pos_return.setText("reffno_pos_return");
        jtxtreffno_pos_return.setNextFocusableComponent(jtxttotal_aft_tax5);
        jtxtreffno_pos_return.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtreffno_pos_returnFocusGained(evt);
            }
        });
        jtxtreffno_pos_return.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtreffno_pos_returnKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jtxtreffno_pos_returnKeyReleased(evt);
            }
        });
        getContentPane().add(jtxtreffno_pos_return);
        jtxtreffno_pos_return.setBounds(210, 140, 150, 23);

        jtxtpayment_pos_return.setEditable(false);
        jtxtpayment_pos_return.setFont(new java.awt.Font("Dialog", 0, 10));
        jtxtpayment_pos_return.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        jtxtpayment_pos_return.setText("payment_pos_return");
        jtxtpayment_pos_return.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jtxtpayment_pos_returnFocusGained(evt);
            }
        });
        jtxtpayment_pos_return.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jtxtpayment_pos_returnKeyPressed(evt);
            }
        });
        getContentPane().add(jtxtpayment_pos_return);
        jtxtpayment_pos_return.setBounds(210, 160, 150, 23);

        jbtnBrowse17.setFont(new java.awt.Font("Dialog", 0, 10));
        jbtnBrowse17.setText("...");
        jbtnBrowse17.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtnBrowse17ActionPerformed(evt);
            }
        });
        getContentPane().add(jbtnBrowse17);
        jbtnBrowse17.setBounds(360, 140, 30, 17);

        jcmbjumlah_tempo_angsuran.setFont(new java.awt.Font("Dialog", 1, 10));
        jcmbjumlah_tempo_angsuran.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "1 Kali", "2 Kali", "3 Kali" }));
        jcmbjumlah_tempo_angsuran.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                jcmbjumlah_tempo_angsuranItemStateChanged(evt);
            }
        });
        getContentPane().add(jcmbjumlah_tempo_angsuran);
        jcmbjumlah_tempo_angsuran.setBounds(580, 430, 63, 23);

        jLabel11.setFont(new java.awt.Font("Dialog", 1, 10));
        jLabel11.setText("Kembali");
        getContentPane().add(jLabel11);
        jLabel11.setBounds(50, 390, 240, 13);

        jlbljumlah_tempo_angsuran1.setFont(new java.awt.Font("Dialog", 1, 10));
        jlbljumlah_tempo_angsuran1.setText("Model Struk");
        getContentPane().add(jlbljumlah_tempo_angsuran1);
        jlbljumlah_tempo_angsuran1.setBounds(290, 460, 150, 13);

        jcmbgetmodel_struk.setFont(new java.awt.Font("Dialog", 1, 10));
        jcmbgetmodel_struk.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "1/2 Kertas A4", "1/4 Kertas A4", "Kertas Gulung" }));
        jcmbgetmodel_struk.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                jcmbgetmodel_strukItemStateChanged(evt);
            }
        });
        getContentPane().add(jcmbgetmodel_struk);
        jcmbgetmodel_struk.setBounds(463, 450, 180, 23);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed

        exit();       					// free the system resources
    }//GEN-LAST:event_jButton2ActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed

        doSelect();
        
        
        
    }//GEN-LAST:event_jButton1ActionPerformed

    private void jtxtjumlah_itemFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtjumlah_itemFocusGained
        // TODO add your handling code here:
        jtxtjumlah_item.setSelectionStart(0);
        jtxtjumlah_item.setSelectionEnd(jtxtjumlah_item.getText().length());
}//GEN-LAST:event_jtxtjumlah_itemFocusGained

    private void jtxtjumlah_itemKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtjumlah_itemKeyPressed
        // TODO add your handling code here:
        runaction(evt);
}//GEN-LAST:event_jtxtjumlah_itemKeyPressed

    private void jtxttotal_bfr_discountFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxttotal_bfr_discountFocusGained
        // TODO add your handling code here:
        jtxttotal_bfr_discount.setSelectionStart(0);
        jtxttotal_bfr_discount.setSelectionEnd(jtxttotal_bfr_discount.getText().length());
    }//GEN-LAST:event_jtxttotal_bfr_discountFocusGained

    private void jtxttotal_bfr_discountKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxttotal_bfr_discountKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxttotal_bfr_discountKeyPressed

    private void jchkinclude_taxItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_jchkinclude_taxItemStateChanged
        // TODO add your handling code here:
        if (!jchkinclude_tax.isSelected()){
            obj.setpayment_discount(new Double(0));
            obj.settotal_discount(new Double(0));
            jtxttax_percent.setText("0");
            jtxttotal_discount.setText("0");

        }
}//GEN-LAST:event_jchkinclude_taxItemStateChanged

    private void jtxttax_percentFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxttax_percentFocusGained
        // TODO add your handling code here:
        jtxttax_percent.setSelectionStart(0);
        jtxttax_percent.setSelectionEnd(jtxttax_percent.getText().length());
    }//GEN-LAST:event_jtxttax_percentFocusGained

    private void jtxttotal_discountFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxttotal_discountFocusGained
        // TODO add your handling code here:
         jtxttotal_discount.setSelectionStart(0);
        jtxttotal_discount.setSelectionEnd(jtxttotal_discount.getText().length());
    }//GEN-LAST:event_jtxttotal_discountFocusGained

    private void jtxtpayment_voucherFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtpayment_voucherFocusGained
        // TODO add your handling code here:
        jtxtpayment_voucher.setSelectionStart(0);
        jtxtpayment_voucher.setSelectionEnd(jtxtpayment_voucher.getText().length());
    }//GEN-LAST:event_jtxtpayment_voucherFocusGained

    private void jtxtpayment_voucherKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_voucherKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxtpayment_voucherKeyPressed

    private void jtxtvoucher_nameFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtvoucher_nameFocusGained
        // TODO add your handling code here:
        jtxtvoucher_name.setSelectionStart(0);
        jtxtvoucher_name.setSelectionEnd(jtxtvoucher_name.getText().length());
    }//GEN-LAST:event_jtxtvoucher_nameFocusGained

    private void jtxtvoucher_nameKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtvoucher_nameKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxtvoucher_nameKeyPressed

    private void jtxtpayment_credit_cardFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtpayment_credit_cardFocusGained
        // TODO add your handling code here:
        jtxtpayment_credit_card.setSelectionStart(0);
        jtxtpayment_credit_card.setSelectionEnd(jtxtpayment_credit_card.getText().length());
    }//GEN-LAST:event_jtxtpayment_credit_cardFocusGained

    private void jtxtpayment_credit_cardKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_credit_cardKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxtpayment_credit_cardKeyPressed

    private void jtxtcredit_card_nameFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtcredit_card_nameFocusGained
        // TODO add your handling code here:
        jtxtcredit_card_name.setSelectionStart(0);
        jtxtcredit_card_name.setSelectionEnd(jtxtcredit_card_name.getText().length());
    }//GEN-LAST:event_jtxtcredit_card_nameFocusGained

    private void jtxtcredit_card_nameKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtcredit_card_nameKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxtcredit_card_nameKeyPressed

    private void jtxtcredit_card_numberFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtcredit_card_numberFocusGained
        // TODO add your handling code here:
        jtxtcredit_card_number.setSelectionStart(0);
        jtxtcredit_card_number.setSelectionEnd(jtxtcredit_card_number.getText().length());
    }//GEN-LAST:event_jtxtcredit_card_numberFocusGained

    private void jtxtcredit_card_numberKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtcredit_card_numberKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxtcredit_card_numberKeyPressed

    private void jtxtpayment_debit_cardFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtpayment_debit_cardFocusGained
        // TODO add your handling code here:
        jtxtpayment_debit_card.setSelectionStart(0);
        jtxtpayment_debit_card.setSelectionEnd(jtxtpayment_debit_card.getText().length());
    }//GEN-LAST:event_jtxtpayment_debit_cardFocusGained

    private void jtxtpayment_debit_cardKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_debit_cardKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxtpayment_debit_cardKeyPressed

    private void jtxtdebit_card_nameFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtdebit_card_nameFocusGained
        // TODO add your handling code here:
        jtxtdebit_card_name.setSelectionStart(0);
        jtxtdebit_card_name.setSelectionEnd(jtxtdebit_card_name.getText().length());
    }//GEN-LAST:event_jtxtdebit_card_nameFocusGained

    private void jtxtdebit_card_nameKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtdebit_card_nameKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxtdebit_card_nameKeyPressed

    private void jtxtdebit_card_numberFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtdebit_card_numberFocusGained
        // TODO add your handling code here:
        jtxtdebit_card_number.setSelectionStart(0);
        jtxtdebit_card_number.setSelectionEnd(jtxtdebit_card_number.getText().length());
    }//GEN-LAST:event_jtxtdebit_card_numberFocusGained

    private void jtxtdebit_card_numberKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtdebit_card_numberKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxtdebit_card_numberKeyPressed

    private void jtxttotal_aft_tax3FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxttotal_aft_tax3FocusGained
        // TODO add your handling code here:
        jtxttotal_aft_tax3.setSelectionStart(0);
        jtxttotal_aft_tax3.setSelectionEnd(jtxttotal_aft_tax3.getText().length());
    }//GEN-LAST:event_jtxttotal_aft_tax3FocusGained

    private void jtxtpayment_salaryFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtpayment_salaryFocusGained
        // TODO add your handling code here:
        jtxtpayment_salary.setSelectionStart(0);
        jtxtpayment_salary.setSelectionEnd(jtxtpayment_salary.getText().length());
    }//GEN-LAST:event_jtxtpayment_salaryFocusGained

    private void jtxttotal_aft_tax5FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxttotal_aft_tax5FocusGained
        // TODO add your handling code here:
        jtxttotal_aft_tax5.setSelectionStart(0);
        jtxttotal_aft_tax5.setSelectionEnd(jtxttotal_aft_tax5.getText().length());
    }//GEN-LAST:event_jtxttotal_aft_tax5FocusGained

    private void jtxtpayment_receiptFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtpayment_receiptFocusGained
        // TODO add your handling code here:
        jtxtpayment_receipt.setSelectionStart(0);
        jtxtpayment_receipt.setSelectionEnd(jtxtpayment_receipt.getText().length());
    }//GEN-LAST:event_jtxtpayment_receiptFocusGained

    private void jtxtpayment_receiptKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_receiptKeyPressed
        // TODO add your handling code here:
        runaction(evt);
        hitungkembalian();
    }//GEN-LAST:event_jtxtpayment_receiptKeyPressed

    private void jtxttax_percentPropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_jtxttax_percentPropertyChange
        // TODO add your handling code here:
        
    }//GEN-LAST:event_jtxttax_percentPropertyChange

    private void jtxttax_percentKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxttax_percentKeyReleased
        // TODO add your handling code here:
        obj.settotal_discount(obj.gettotal_bfr_discount()*(GlobalUtils.toDbl(jtxttax_percent.getText())/100));
        jtxttotal_discount.setText(GlobalUtils.formatnumber(obj.gettotal_discount()));
        obj.settotal_aft_discount(obj.gettotal_bfr_discount()-obj.gettotal_discount()-obj.getpayment_voucher());
        calculatenetsales();


    }//GEN-LAST:event_jtxttax_percentKeyReleased

    private void jtxtpayment_voucherKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_voucherKeyReleased
        // TODO add your handling code here:
        GlobalUtils.domasking(jtxtpayment_voucher);
        obj.setpayment_voucher(GlobalUtils.toDbl(jtxtpayment_voucher.getText()));
        calculatenetsales();
    }//GEN-LAST:event_jtxtpayment_voucherKeyReleased

    private void jtxtpayment_credit_cardKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_credit_cardKeyReleased
        // TODO add your handling code here:
        GlobalUtils.domasking(jtxtpayment_credit_card);
        obj.setpayment_credit_card(GlobalUtils.toDbl(jtxtpayment_credit_card.getText()));
        calculatepaymentsalary();
        
    }//GEN-LAST:event_jtxtpayment_credit_cardKeyReleased

    private void jtxtpayment_debit_cardKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_debit_cardKeyReleased
        // TODO add your handling code here:
        GlobalUtils.domasking(jtxtpayment_debit_card);
        obj.setpayment_debit_card(GlobalUtils.toDbl(jtxtpayment_debit_card.getText()));
        calculatepaymentsalary();
    }//GEN-LAST:event_jtxtpayment_debit_cardKeyReleased

    private void jtxtpayment_salaryKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_salaryKeyReleased
        // TODO add your handling code here:
        GlobalUtils.domasking(jtxtpayment_salary);
    }//GEN-LAST:event_jtxtpayment_salaryKeyReleased

    private void jtxtpayment_receiptKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_receiptKeyReleased
        // TODO add your handling code here:
        GlobalUtils.domasking(jtxtpayment_receipt);
        if (optpayment_salary_status_tunai.isSelected()){
            obj.setpayment_cash(GlobalUtils.toDbl(jtxtpayment_salary.getText()));
        }
        obj.setpayment_receipt(GlobalUtils.toDbl(jtxtpayment_receipt.getText()));
        hitungkembalian();
    }//GEN-LAST:event_jtxtpayment_receiptKeyReleased

    private void jtxtcredit_card_nameKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtcredit_card_nameKeyReleased
        // TODO add your handling code here:
        obj.setcredit_card_name(jtxtcredit_card_name.getText());
    }//GEN-LAST:event_jtxtcredit_card_nameKeyReleased

    private void jtxtcredit_card_numberKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtcredit_card_numberKeyReleased
        // TODO add your handling code here:
        obj.setcredit_card_number(jtxtcredit_card_number.getText());
    }//GEN-LAST:event_jtxtcredit_card_numberKeyReleased

    private void jtxtdebit_card_nameKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtdebit_card_nameKeyReleased
        // TODO add your handling code here:
        obj.setdebit_card_name(jtxtdebit_card_name.getText());
    }//GEN-LAST:event_jtxtdebit_card_nameKeyReleased

    private void jtxtdebit_card_numberKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtdebit_card_numberKeyReleased
        // TODO add your handling code here:
        obj.setdebit_card_number(jtxtdebit_card_number.getText());
    }//GEN-LAST:event_jtxtdebit_card_numberKeyReleased

    private void optpayment_salary_status_tunaiItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_optpayment_salary_status_tunaiItemStateChanged
        // TODO add your handling code here:
        doselection_salary();
    }//GEN-LAST:event_optpayment_salary_status_tunaiItemStateChanged

    private void optpayment_salary_potong_gajiItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_optpayment_salary_potong_gajiItemStateChanged
        // TODO add your handling code here:
        doselection_salary();
    }//GEN-LAST:event_optpayment_salary_potong_gajiItemStateChanged

    private void jchkinclude_taxKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jchkinclude_taxKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jchkinclude_taxKeyPressed

    private void jtxttax_percentKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxttax_percentKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxttax_percentKeyPressed

    private void jtxttotal_discountKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxttotal_discountKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxttotal_discountKeyPressed

    private void optpayment_salary_status_tunaiKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_optpayment_salary_status_tunaiKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_optpayment_salary_status_tunaiKeyPressed

    private void optpayment_salary_potong_gajiKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_optpayment_salary_potong_gajiKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_optpayment_salary_potong_gajiKeyPressed

    private void jtxtpayment_salaryKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_salaryKeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxtpayment_salaryKeyPressed

    private void jtxttotal_aft_tax5KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxttotal_aft_tax5KeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxttotal_aft_tax5KeyPressed

    private void jtxttotal_aft_tax3KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxttotal_aft_tax3KeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jtxttotal_aft_tax3KeyPressed

    private void jButton1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jButton1KeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jButton1KeyPressed

    private void jButton2KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jButton2KeyPressed
        // TODO add your handling code here:
        runaction(evt);
    }//GEN-LAST:event_jButton2KeyPressed

    private void optpayment_salary_potong_gajiPropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_optpayment_salary_potong_gajiPropertyChange
        // TODO add your handling code here:

    }//GEN-LAST:event_optpayment_salary_potong_gajiPropertyChange

    private void optpayment_salary_status_tunaiPropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_optpayment_salary_status_tunaiPropertyChange
        // TODO add your handling code here:

    }//GEN-LAST:event_optpayment_salary_status_tunaiPropertyChange

    private void optpayment_salary_status_tunaiActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_optpayment_salary_status_tunaiActionPerformed
        // TODO add your handling code here:
        doselection_salary();
    }//GEN-LAST:event_optpayment_salary_status_tunaiActionPerformed

    private void optpayment_salary_potong_gajiActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_optpayment_salary_potong_gajiActionPerformed
        // TODO add your handling code here:
        doselection_salary();
    }//GEN-LAST:event_optpayment_salary_potong_gajiActionPerformed

    private void jtxtreffno_pos_returnFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtreffno_pos_returnFocusGained
        // TODO add your handling code here:
    }//GEN-LAST:event_jtxtreffno_pos_returnFocusGained

    private void jtxtreffno_pos_returnKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtreffno_pos_returnKeyPressed
        // TODO add your handling code here:
        
    }//GEN-LAST:event_jtxtreffno_pos_returnKeyPressed

    private void jtxtreffno_pos_returnKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtreffno_pos_returnKeyReleased
        // TODO add your handling code here:
        showdatareturn();
    }//GEN-LAST:event_jtxtreffno_pos_returnKeyReleased

    private void jtxtpayment_pos_returnFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jtxtpayment_pos_returnFocusGained
        // TODO add your handling code here:
    }//GEN-LAST:event_jtxtpayment_pos_returnFocusGained

    private void jtxtpayment_pos_returnKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jtxtpayment_pos_returnKeyPressed
        // TODO add your handling code here:
    }//GEN-LAST:event_jtxtpayment_pos_returnKeyPressed

    private void jbtnBrowse17ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtnBrowse17ActionPerformed
        // TODO add your handling code here:
        browsecontroller obrowse = new browsecontroller();
        obrowse.showbrowser(obrowse.ar_pos_return, "", jtxtreffno_pos_return);
        showdatareturn();
    }//GEN-LAST:event_jbtnBrowse17ActionPerformed

    private void jcmbjumlah_tempo_angsuranItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_jcmbjumlah_tempo_angsuranItemStateChanged
        // TODO add your handling code here:
        obj.setjumlah_tempo_angsuran(jcmbjumlah_tempo_angsuran.getSelectedIndex()+1);
    }//GEN-LAST:event_jcmbjumlah_tempo_angsuranItemStateChanged

    private void jcmbgetmodel_strukItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_jcmbgetmodel_strukItemStateChanged
        // TODO add your handling code here:
    }//GEN-LAST:event_jcmbgetmodel_strukItemStateChanged
    
     
    /**
     * @param args the command line arguments
     */
     
     
    public static void main(String args[]) {
        
    }

    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JLabel jHeader;
    private javax.swing.JLabel jHeader1;
    private javax.swing.JLabel jHeader2;
    private javax.swing.JLabel jHeader3;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JButton jbtnBrowse17;
    private javax.swing.JCheckBox jchkinclude_tax;
    private javax.swing.JComboBox jcmbgetmodel_struk;
    private javax.swing.JComboBox jcmbjumlah_tempo_angsuran;
    private javax.swing.JLabel jlblcustomer_code;
    private javax.swing.JLabel jlblcustomer_name;
    private javax.swing.JLabel jlbljumlah_tempo_angsuran;
    private javax.swing.JLabel jlbljumlah_tempo_angsuran1;
    private javax.swing.JLabel jlblmember_number;
    private javax.swing.JTextField jtxtcredit_card_name;
    private javax.swing.JTextField jtxtcredit_card_number;
    private javax.swing.JTextField jtxtdebit_card_name;
    private javax.swing.JTextField jtxtdebit_card_number;
    private javax.swing.JTextField jtxtjumlah_item;
    private javax.swing.JTextField jtxtpayment_credit_card;
    private javax.swing.JTextField jtxtpayment_debit_card;
    private javax.swing.JTextField jtxtpayment_pos_return;
    private javax.swing.JTextField jtxtpayment_receipt;
    private javax.swing.JTextField jtxtpayment_salary;
    private javax.swing.JTextField jtxtpayment_voucher;
    private javax.swing.JTextField jtxtreffno_pos_return;
    private javax.swing.JTextField jtxttax_percent;
    private javax.swing.JTextField jtxttotal_aft_tax3;
    private javax.swing.JTextField jtxttotal_aft_tax5;
    private javax.swing.JTextField jtxttotal_bfr_discount;
    private javax.swing.JTextField jtxttotal_discount;
    private javax.swing.JTextField jtxtvoucher_name;
    private javax.swing.JRadioButton optpayment_salary_potong_gaji;
    private javax.swing.JRadioButton optpayment_salary_status_tunai;
    // End of variables declaration//GEN-END:variables

    private void doSelect() {
        try {
            this.ofrm.saveData();
            obj.setmodel_struk(GlobalUtils.churuf(jcmbgetmodel_struk.getSelectedIndex()+1));
            this.setVisible(false);
            parameter = new HashMap();
            parameter.put("document_number", obj.getdocument_number());
            // Versi 1
            String file = "";
            if (GlobalUtils.getAppDir()) {
                try {
                    file = appsettinghandler.getAppPath() + "/Reports/FTPS-03-0"+obj.getmodel_struk()+".jrxml";
                    jasperReport = JasperCompileManager.compileReport(file);
                    System.out.println("file: "+file);
                    System.out.println("isi parameter sruk:" + parameter);
                    jasperPrint = JasperFillManager.fillReport(jasperReport, parameter, db.getConnection());

                    if (obj.getprint_to_printer().equalsIgnoreCase("Y")){
                        JasperPrintManager.printReport(jasperPrint,false);
                    } else {
                        JasperViewer.viewReport(jasperPrint, false);
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

        } catch (CodeException ex) {
            Logger.getLogger(frmar_pos_sales_payment.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private void showdata() {
        clearfield();
        ar_customerext ar_cust = obj.getcustomer_info();
        jlblcustomer_code.setText(ar_cust.getcustomer_code());
        jlblcustomer_name.setText(ar_cust.getcustomer_name());
        jlblmember_number.setText(ar_cust.getmember_number());

        if (ar_cust.getmember_koperasi().equalsIgnoreCase("Y")){
            optpayment_salary_potong_gaji.setEnabled(true);
        } else {
            optpayment_salary_potong_gaji.setEnabled(false);
        }
        if (obj.getpayment_salary_status().equalsIgnoreCase("N")){
            optpayment_salary_status_tunai.setSelected(true);
        } else {
            optpayment_salary_potong_gaji.setSelected(true);
        }
        jtxtjumlah_item.setText(GlobalUtils.churuf(this.obj.getDetail1().size()));
        jtxtcredit_card_name.setText(this.obj.getcredit_card_name());
        jtxtdebit_card_name.setText(this.obj.getdebit_card_name());
        jtxtpayment_credit_card.setText(GlobalUtils.formatnumber(this.obj.getpayment_credit_card()));
        jtxtpayment_debit_card.setText(GlobalUtils.formatnumber(this.obj.getpayment_debit_card()));
        jtxtcredit_card_number.setText(this.obj.getcredit_card_number());
        jtxtdebit_card_number.setText(this.obj.getdebit_card_number());
        jtxttotal_discount.setText(GlobalUtils.formatnumber(this.obj.gettotal_discount()));
        jtxttax_percent.setText("0");
        jtxttotal_bfr_discount.setText(GlobalUtils.formatnumber(this.obj.gettotal_bfr_discount()));
        jtxtpayment_voucher.setText(GlobalUtils.formatnumber(this.obj.getpayment_voucher()));
        jtxtvoucher_name.setText(this.obj.getvoucher_name());
        calculatenetsales();
        jtxtpayment_salary.setText(GlobalUtils.formatnumber(obj.gettotal_net_sales()-(obj.getpayment_credit_card()+obj.getpayment_debit_card())));
        //jtxtpayment_salary.setText(GlobalUtils.formatnumber(this.obj.getpayment_salary()));
        jtxttotal_aft_tax5.setText(GlobalUtils.formatnumber(this.obj.gettotal_aft_discount()));
        jtxtpayment_receipt.setText(GlobalUtils.formatnumber(this.obj.getpayment_receipt()));
        jtxttotal_aft_tax3.setText(GlobalUtils.formatnumber(obj.getkembalian()));

        jtxtreffno_pos_return.setText(obj.getreffno_pos_return());
        jtxtpayment_pos_return.setText(GlobalUtils.formatnumber(this.obj.getpayment_pos_return()));
        jcmbjumlah_tempo_angsuran.setSelectedIndex(this.obj.getjumlah_tempo_angsuran()-1);

        jcmbgetmodel_struk.setSelectedIndex(GlobalUtils.toInt(obj.getmodel_struk())-1);

        hitungkembalian();
    }

    private void clearfield() {
        jtxtjumlah_item.setText("0");
        jtxtcredit_card_name.setText("");
        jtxtdebit_card_name.setText("");
        jtxtpayment_credit_card.setText("0");
        jtxtpayment_debit_card.setText("0");
        jtxtcredit_card_number.setText("");
        jtxtdebit_card_number.setText("");
        jtxttotal_discount.setText("0");
        jtxttax_percent.setText("0");
        jtxttotal_bfr_discount.setText("0");
        jtxtpayment_voucher.setText("0");
        jtxtvoucher_name.setText("0");
        jtxttotal_aft_tax3.setText("0");
        jtxtpayment_salary.setText("0");
        jtxttotal_aft_tax5.setText("0");
        jtxtpayment_receipt.setText("0");

        jcmbjumlah_tempo_angsuran.setVisible(false);
        jlbljumlah_tempo_angsuran.setVisible(false);
    }

    private void hitungkembalian() {
        obj.setkembalian(obj.getpayment_receipt()-(obj.gettotal_net_sales()-(obj.getpayment_credit_card()+obj.getpayment_debit_card())));
        jtxttotal_aft_tax3.setText(GlobalUtils.formatnumber(obj.getkembalian()));
    }

    private void calculatepaymentsalary() {
        if (optpayment_salary_potong_gaji.isSelected()){
            obj.setpayment_salary(obj.gettotal_net_sales()-(obj.getpayment_credit_card()+obj.getpayment_debit_card()));
            obj.setpayment_cash(new Double(0));
            obj.setpayment_receipt(obj.getpayment_salary());
        } else {
            obj.setpayment_salary(new Double(0));
            //obj.setpayment_cash(new Double(0));
            //obj.setpayment_receipt(obj.getpayment_cash());
        }
        jtxtpayment_salary.setText(GlobalUtils.formatnumber(obj.gettotal_net_sales()-(obj.getpayment_credit_card()+obj.getpayment_debit_card())));
        if (obj.getpayment_cash()>0){
        hitungkembalian();
        }
    }

    private void calculatenetsales() {
        obj.settotal_aft_discount(obj.gettotal_bfr_discount()-obj.gettotal_discount());
        obj.settotal_net_sales(obj.gettotal_aft_discount()-obj.getpayment_voucher());
        jtxttotal_aft_tax5.setText(GlobalUtils.formatnumber(obj.gettotal_net_sales()));
        calculatepaymentsalary();
    }

    private void runaction(KeyEvent evt) {
        switch (evt.getKeyCode()){
            case KeyEvent.VK_F12:
                doSelect();
                break;
            case KeyEvent.VK_ESCAPE:
                exit();
                break;
        }
    }

    private void exit() {
        setVisible(false);     
    }

    private void doselection_salary() {
        calculatenetsales();
        calculatepaymentsalary();
        if (optpayment_salary_status_tunai.isSelected()){
            obj.setpayment_salary_status("N");
            jtxtpayment_receipt.setText(GlobalUtils.formatnumber(obj.getpayment_cash()));

            jcmbjumlah_tempo_angsuran.setVisible(false);
            jlbljumlah_tempo_angsuran.setVisible(false);
        } else {
            obj.setpayment_salary_status("Y");
            jtxtpayment_receipt.setText(GlobalUtils.formatnumber(obj.getpayment_salary()));
            jtxttotal_aft_tax3.setText("0");

            jcmbjumlah_tempo_angsuran.setVisible(true);
            jlbljumlah_tempo_angsuran.setVisible(true);
        }
        
    }

    private void showdatareturn() {
        ar_pos_returnext oret=new ar_pos_returnext();
        try {
            if (oret.initdata(jtxtreffno_pos_return.getText())) {
                obj.setreffno_pos_return(oret.getdocument_number());
                obj.setpayment_pos_return(oret.gettotal_aft_discount());
                jtxtpayment_pos_return.setText(GlobalUtils.formatnumber(oret.gettotal_aft_discount()));
            }
        } catch (CodeException ex) {
            Logger.getLogger(frmar_pos_sales_payment.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    
    
}
